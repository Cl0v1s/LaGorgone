<app-article>
    <app-header></app-header>
    <div class='article'>
        <div class="picture" style="background-image: url('{article.picture.path}');">
            <h2>{ article.name }</h2>
        </div>
        <div class="content" ref="content">
        </div>
    </div>
    <app-footer></app-footer>
    <app-sponsors></app-sponsors>
    <script>
        var tag = this;

        tag.article = null;

        tag.on("before-mount", function(){
            tag.article = tag.opts.article;

            if(tag.article == null)
                Router.redirect("/");

        });

        tag.on("mount", function(){
            if(tag.article != null)
            {
                tag.refs.content.innerHTML = tag.article.content;
                document.title = "La Gorgone: "+tag.article.name;
                document.head.innerHTML += "<meta name='description' content='"+tag.article.content.slice(0, -Math.abs(tag.article.content.length - 160)).replace(/<.*?>/g, "")+"'>";
            }
        });
    </script>
</app-article>