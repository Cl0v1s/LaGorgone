<app-article>
    <app-header></app-header>
    <div class='article'>
        <div class="picture" style="background-image: url('{article.picture.path}');">
            <h2>{ article.name }</h2>
        </div>
        <div class="content" ref="content">
        </div>
        <div class="pub" ref="pub">
            <p>
                - Vous avez terminé l'article, merci de l'avoir lu ! -<br>
                Nous espérons que nous avons pu vous partager quelque chose d'intéressant
            </p>
            <p>
                Pour soutenir notre site et participer à son développement, vous pouvez visionner une courte publicité ci-dessous.<br>
                Quelques secondes suffisent à nous aider !
            </p>
        </div>
    </div>
    <app-footer></app-footer>
    <app-sponsors></app-sponsors>
    <script>
        var tag = this;

        tag.article = null;

        tag.on("before-mount", function(){
            tag.article = tag.opts.article;

            if(tag.article == null)
                Router.redirect("/");

        });

        tag.on("mount", function(){
            if(tag.article != null)
            {
                tag.refs.content.innerHTML = tag.article.content;
                document.title = "La Gorgone: "+tag.article.name;
                document.head.innerHTML += "<meta name='description' content='"+tag.article.content.slice(0, -Math.abs(tag.article.content.length - 160)).replace(/<.*?>/g, "")+"'>";
            }
            let s = document.createElement( 'script' );
            s.setAttribute("data-cfasync", "false");
            s.setAttribute( 'src', "//p259904.clksite.com/adServe/banners?tid=259904_500126_0" );
            tag.refs.pub.appendChild(s);
        });
    </script>
</app-article>